# Chapter1

- `/app`: アプリケーションのすべてのルート、コンポーネント、ロジックが含まれています。主にここから作業します。
- `/app/lib`: 再利用可能なユーティリティ関数やデータ取得関数など、アプリケーションで使用される関数が含まれます。
- `/app/ui`: カード、テーブル、フォームなど、アプリケーションのすべての UI コンポーネントが含まれます。時間を節約するために、これらのコンポーネントは事前にスタイル設定されています。
- `/public`: 画像など、アプリケーションのすべての静的アセットが含まれます。
- `/script`: 後の章でデータベースにデータを設定するために使用するシード スクリプトが含まれています。
- 設定ファイル`next.config.js`: アプリケーションのルートなどに設定ファイルがあることにも気づきます。これらのファイルのほとんどは、`create-next-app` を使用して新しいプロジェクトを開始するときに作成され、事前設定されます。このコースではそれらを変更する必要はありません。

# Chapter2

`global.css`をアプリケーション内の任意のコンポーネントにインポートできますが、通常はそれを最上位コンポーネントに追加することをお勧めします。Next.js では、これはroot layoutです(これについては後で詳しく説明します)。

`/app/layout.tsx`ファイルに移動して`global.css`をインポートすることで、グローバルスタイルをアプリケーションに追加します。

## CSS module を追加する

`app/ui/`にhome.module.css を追加し、そこにcssの設定を追加。
`app/page.tsx`でファイルをインポートして、スタイルを適用する。

**CSSモジュールの利点**
CSSクラスをデフォルトでコンポーネントにローカルにスコープする方法を提供し、モジュール性を向上させ、スタイルの競合のリスクを軽減します。

## clsx ライブラリをクラスネームを切り替えるために追加する

clsx はクラス名を簡単に切り替えることができるライブラリです。
次のように条件付きでクラスを適用できます。

```TypeScript: /app/ui/invoices/status.tsx
import clsx from 'clsx';

export default function InvoiceStatus({ status }: { status: string }) {
  return (
    <span
      className={clsx(
        'inline-flex items-center rounded-full px-2 py-1 text-sm',
        {
          'bg-gray-100 text-gray-500': status === 'pending',
          'bg-green-500 text-white': status === 'paid',
        },
      )}
    >
    // ...
)}
```

# Chapter3

Next.jsは、`next/font`モジュールを使用するしたときアプリケーション内のフォントを自動的で最適化します。ビルド時にフォントファイルをダウンロードし、他の静的アセットとともにホストします。これは、ユーザーがアプリケーションにアクセスしたときに、パフォーマンスに影響を与えるようなフォントに対する追加のネットワーク要求がないことを意味します。

## プライマリフォントの追加

`/app/ui`フォルダー内に`fonts.ts`という名前の新しいファイルを作成します。このファイルを使用して、アプリケーション全体で使用されるフォントを保存します。

`next/font/google`モジュールから`Inter`フォントをインポートします。これがプライマリフォントになります。次に、どのサブセットかを指定しますロードしたいと考えています。この場合、`latin`

## 画像の最適化

Next.jsは、画像などの静的アセットを最上位フォルダー`/public`の下に提供できます。`/public`内部のファイルはアプリケーションで参照できます。

通常の HTML では、次のように画像を追加します。

```HTML
<img
  src="/hero.png"
  alt="Screenshots of the dashboard project showing desktop version"
/>
```

ただし、これは手動で以下を行う必要があることを意味します。

- 画像がさまざまな画面サイズで応答することを確認します。
- さまざまなデバイスの画像サイズを指定します。
- 画像の読み込み時にレイアウトがずれるのを防ぎます。
- ユーザーのビューポートの外にある画像を遅延読み込みします。

これらの最適化を手動で実装する代わりに、`next/image`コンポーネントを使用して画像を自動的に最適化できます。

## コンポーネント<Image>

コンポーネント<Image>は HTML<img>タグの拡張であり、次のような自動画像最適化機能が付属しています。

- 画像読み込み時に自動的にレイアウトがずれるのを防ぎます。
- 小さなビューポートを備えたデバイスに大きな画像が送信されるのを避けるために、画像のサイズを変更します。
- デフォルトで画像を遅延読み込みします (画像はビューポートに入るときに読み込まれます)。
- WebPなどの最新の形式で画像を提供するとAVIFブラウザがサポートしている場合。

# Chapter4

## ネストされたルーティング

Next.js はファイル システム ルーティングを使用し、フォルダーを使用してネストされたルートを作成します。各フォルダーは、URL セグメントにマップされるルートセグメントを表します。
![nested_routing](folders-to-url-segments.avif)

`layout.tsx`および`page.tsx`ファイルを使用して、ルートごとに個別のUIを作成できます。

`page.tsx`はReact ンポーネントをエクスポートする特別な Next.js ファイルであり、ルートにアクセスできるようにするために必要です。アプリケーションには、すでにページファイル`/app/page.tsx`があります。これは、ルートに関連付けられたホームページです。

## ダッシュボードレイアウトの作成

ダッシュボードには、複数のページにわたって共有されるある種のナビゲーションがあります。Next.js では、特別な`layout.tsx`ファイルを使用して、複数のページ間で共有される UI を作成できます。

`<SideNav />`まず、コンポーネントをレイアウトにインポートします。このファイルにインポートするコンポーネントはすべてレイアウトの一部になります。

`<Layout />`コンポーネントはchildren propを受け取ります。このchildrenはページまたは別のレイアウトのいずれかになります。`/dashboard`内部のページは<Layout />に自動的にネストされます。
![nested_layout](shared-layout.avif)

Next.js でレイアウトを使用する利点の 1つは、ナビゲーション時にページ コンポーネントのみが更新され、レイアウトは再レンダリングされないことです。これは部分レンダリングと呼ばれます。
![partial-rendering](partial-rendering-dashboard.avif)

# Chapter5

## なぜナビゲーションを最適化するのでしょうか?

ページ間をリンクするには、従来は<a>HTML 要素を使用していました。現時点では、サイドバーのリンクには<a>要素が使用されていますが、ブラウザーでホーム、請求書、顧客のページ間を移動するとどうなるかに注目してください。

各ページ ナビゲーションでページ全体が更新されます。

## コンポーネント<Link>

Next.js では、<Link />コンポーネントを使用してアプリケーション内のページ間をリンクできます。JavaScriptを使用してクライアント側のナビゲーション<Link>を実行できるようになります。

`<Link />`コンポーネントを使用するには、 `/app/ui/dashboard/nav-links.tsx`を開き、Linkコンポーネントを`next/link`からインポートします。次に、<a>タグを<Link>に置き換えます。

## 自動コード分割とプリフェッチ

ナビゲーション エクスペリエンスを向上させるために、Next.js はアプリケーションをルート セグメントごとに自動的にコード分割します。これは従来の React SPAとは異なります、ブラウザーは初期ロード時にすべてのアプリケーション コードをロードします。

コードをルートごとに分割すると、ページが分離されます。特定のページでエラーが発生しても、アプリケーションの残りの部分は引き続き動作します。

さらに、運用環境では、<Link>ブラウザのビューポートにコンポーネントが表示されるたびに、Next.js がリンクされたルートのコードをバックグラウンドで自動的にプリフェッチします。ユーザーがリンクをクリックするまでに、宛先ページのコードはすでにバックグラウンドで読み込まれており、これによりページがほぼ瞬時に遷移します。
